<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Nota Saya</title>
  <script>
    const webAppURL = "https://script.google.com/a/macros/valeo.com/s/AKfycbygpDo4oz-4xn33kxAFZwEjLpLAAFCZE4umEyfjMpwktHzdyVbId6W8zxZoXoIfvlrH/exec";

    async function hantarNota(event) {
      event.preventDefault();
      const input = document.getElementById("nota");
      const nota = input.value.trim();
      if (nota === "") return;

      const response = await fetch(webAppURL, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `nota=${encodeURIComponent(nota)}`
      });

      const result = await response.json();
      if (result.status === "success") {
        input.value = "";
        document.getElementById("paparNota").textContent = "âœ”ï¸ Nota Disimpan: " + result.nota;
        loadNota(); // Refresh senarai
      }
    }

    async function loadNota() {
      const response = await fetch(webAppURL);
      const records = await response.json();
      const list = document.getElementById("senaraiNota");
      list.innerHTML = "";

      records.forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.nota} (ğŸ—“ï¸ ${item.tarikh} ğŸ•’ ${item.masa})`;
        list.appendChild(li);
      });
    }

    window.onload = loadNota;
  </script>
</head>
<body>
  <h2>ğŸ“˜ Simpan Nota ke Google Sheets</h2>

  <form onsubmit="hantarNota(event)">
    <input type="text" id="nota" name="nota" placeholder="Tulis nota anda di sini" required>
    <button type="submit">Simpan</button>
  </form>

  <p id="paparNota"></p>

  <h3>ğŸ“„ Senarai Nota</h3>
  <ul id="senaraiNota"></ul>
</body>
</html>
