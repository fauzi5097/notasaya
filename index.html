<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Nota Saya</title>
  <script>
    const webAppURL = "https://script.google.com/a/macros/valeo.com/s/AKfycbyS5oBywaOpl8Qmb-iXdizotmk0tAwZqzPfD5usMFwmPmGNUTPa8IqJ4r6ti38FAvw5Sw/exec";

    async function hantarNota(event) {
      event.preventDefault();
      const input = document.getElementById("nota");
      const nota = input.value.trim();
      if (nota === "") return;

      const response = await fetch(webAppURL, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `nota=${encodeURIComponent(nota)}`
      });

      const result = await response.json();
      if (result.status === "success") {
        document.getElementById("paparNota").textContent = "âœ”ï¸ Nota Disimpan: " + result.nota;
        input.value = "";
        loadNota();
      }
    }

    async function loadNota() {
      const res = await fetch(webAppURL);
      const data = await res.json();
      const list = document.getElementById("senaraiNota");
      list.innerHTML = "";
      data.forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.nota} (ğŸ“… ${item.tarikh}, ğŸ•’ ${item.masa})`;
        list.appendChild(li);
      });
    }

    window.onload = loadNota;
  </script>
</head>
<body>
  <h2>ğŸ“˜ Simpan Nota ke Google Sheets</h2>
  <form onsubmit="hantarNota(event)">
    <input type="text" id="nota" name="nota" required placeholder="Tulis nota di sini">
    <button type="submit">Simpan</button>
  </form>

  <p id="paparNota"></p>

  <h3>ğŸ—‚ï¸ Senarai Nota</h3>
  <ul id="senaraiNota"></ul>
</body>
</html>
